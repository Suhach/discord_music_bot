# Discord Music Bot

–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –±–æ—Ç –¥–ª—è Discord —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π YouTube, Spotify –∏ SoundCloud.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üéµ –ü–æ–∏—Å–∫ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –º—É–∑—ã–∫–∏ –∏–∑ YouTube, Spotify –∏ SoundCloud
- üìã –°–∏—Å—Ç–µ–º–∞ –æ—á–µ—Ä–µ–¥–µ–π
- ‚è∏Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º (–ø–∞—É–∑–∞, —Å–∫–∏–ø, —Å—Ç–æ–ø)
- üéÆ –£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∫–Ω–æ–ø–∫–∞–º–∏

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **Go 1.21+**
- **FFmpeg** - –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ
- **yt-dlp** - –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏–∑ YouTube/SoundCloud

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### Ubuntu/Debian
```bash
sudo apt update
sudo apt install ffmpeg
sudo pip install yt-dlp
```

#### macOS
```bash
brew install ffmpeg
brew install yt-dlp
```

#### Windows
1. –°–∫–∞—á–∞–π—Ç–µ FFmpeg —Å https://ffmpeg.org/download.html
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ yt-dlp: `pip install yt-dlp`

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git clone https://github.com/Artem/DC_bot.git
cd DC_bot
```

### 2. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á–∏

#### Discord Bot Token
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://discord.com/developers/applications
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "Bot"
4. –ù–∞–∂–º–∏—Ç–µ "Add Bot"
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω
6. –í —Ä–∞–∑–¥–µ–ª–µ "Privileged Gateway Intents" –≤–∫–ª—é—á–∏—Ç–µ:
   - Server Members Intent
   - Message Content Intent

#### Spotify API
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://developer.spotify.com/dashboard
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Client ID –∏ Client Secret

#### YouTube API
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://console.cloud.google.com/
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
3. –í–∫–ª—é—á–∏—Ç–µ "YouTube Data API v3"
4. –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á –≤ —Ä–∞–∑–¥–µ–ª–µ "Credentials"

#### SoundCloud (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://soundcloud.com/you/apps
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Client ID

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª
```bash
cp .env.example .env
nano .env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–∞—à–∏–º–∏ –∫–ª—é—á–∞–º–∏:
```env
DISCORD_TOKEN=your_discord_bot_token
SPOTIFY_CLIENT_ID=your_spotify_client_id
SPOTIFY_SECRET=your_spotify_secret
YOUTUBE_API_KEY=your_youtube_api_key
SOUNDCLOUD_CLIENT_ID=your_soundcloud_client_id
```

### 4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Go –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
go mod download
```

### 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
```bash
go run cmd/bot/main.go
```

–ò–ª–∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ:
```bash
go build -o bot cmd/bot/main.go
./bot
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://discord.com/developers/applications
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "OAuth2" ‚Üí "URL Generator"
4. –í—ã–±–µ—Ä–∏—Ç–µ scopes:
   - `bot`
   - `applications.commands`
5. –í—ã–±–µ—Ä–∏—Ç–µ Bot Permissions:
   - Send Messages
   - Connect
   - Speak
   - Use Slash Commands
6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
7. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä

## –ö–æ–º–∞–Ω–¥—ã

- `/play_s [–Ω–∞–∑–≤–∞–Ω–∏–µ]` - –ü–æ–∏—Å–∫ –≤ Spotify
- `/play_y [–Ω–∞–∑–≤–∞–Ω–∏–µ]` - –ü–æ–∏—Å–∫ –≤ YouTube
- `/play_sc [–Ω–∞–∑–≤–∞–Ω–∏–µ]` - –ü–æ–∏—Å–∫ –≤ SoundCloud
- `/skip` - –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ç—Ä–µ–∫
- `/pause` - –ü–∞—É–∑–∞/–≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å
- `/stop` - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –±–æ—Ç–∞
- `/queue` - –ü–æ–∫–∞–∑–∞—Ç—å –æ—á–µ—Ä–µ–¥—å

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ó–∞–π–¥–∏—Ç–µ –≤ –≥–æ–ª–æ—Å–æ–≤–æ–π –∫–∞–Ω–∞–ª
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/play_y –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏`
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–µ–∫ –∏–∑ —Å–ø–∏—Å–∫–∞, –Ω–∞–∂–∞–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É
4. –ë–æ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ –≤–∞—à–µ–º—É –∫–∞–Ω–∞–ª—É –∏ –Ω–∞—á–Ω–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### FFmpeg –Ω–µ –Ω–∞–π–¥–µ–Ω
```bash
which ffmpeg  # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É
```

### yt-dlp –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
yt-dlp --update  # –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
```

### –ë–æ—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –≥–æ–ª–æ—Å–æ–≤–æ–º—É –∫–∞–Ω–∞–ª—É
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –≥–æ–ª–æ—Å–æ–≤–æ–º –∫–∞–Ω–∞–ª–µ

### Spotify –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å Client ID –∏ Secret
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ –≤ Spotify Dashboard

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ cmd/bot/main.go          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ bot/bot.go           # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ player/player.go     # –ê—É–¥–∏–æ –ø–ª–µ–µ—Ä –∏ –æ—á–µ—Ä–µ–¥—å
‚îÇ   ‚îú‚îÄ‚îÄ spotify/spotify.go   # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ Spotify
‚îÇ   ‚îú‚îÄ‚îÄ youtube/youtube.go   # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å YouTube
‚îÇ   ‚îî‚îÄ‚îÄ soundcloud/soundcloud.go  # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SoundCloud
‚îú‚îÄ‚îÄ pkg/config/config.go     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ .env                     # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥
–î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤ –º–∞—Å—Å–∏–≤ `commands` –≤ `internal/bot/bot.go` –∏ —Å–æ–∑–¥–∞–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
go test ./...
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å–æ–∑–¥–∞–π—Ç–µ issue –Ω–∞ GitHub.
